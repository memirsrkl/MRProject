@model Application.Features.MeetingRoom.Features.CreateMeetingRoomCommand

@{
    ViewData["Title"] = "Toplantı Salonu Ekle";
}

<h2>Toplantı Odası Ekle</h2>

<form id="meetingRoomForm">
    <div class="mb-3">
        <label asp-for="Description" class="form-label">Açıklama</label>
        <input asp-for="Description" class="form-control" />
        <span asp-validation-for="Description" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="Location" class="form-label">Konum</label>
        <input asp-for="Location" class="form-control" />
        <span asp-validation-for="Location" class="text-danger"></span>
    </div>

    <div class="mb-3">
        <label asp-for="Capacity" class="form-label">Kapasitesi</label>
        <input asp-for="Capacity" type="number" class="form-control" />
        <span asp-validation-for="Capacity" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Kaydet</button>
</form>

<div id="resultMessage" class="mt-3"></div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        $("#meetingRoomForm").submit(function (e) {
            e.preventDefault();

            $.ajax({
                url: '@Url.Action("AddMeetingRoom", "Admin")',
                type: 'POST',
                data: $(this).serialize(),
                success: function (response) {
                    if (response.succeeded || response.data === true) {
                        $("#resultMessage").html("<div class='alert alert-success'>Toplantı odası başarıyla eklendi.</div>");
                        $("#meetingRoomForm")[0].reset();
                    } else {
                        $("#resultMessage").html("<div class='alert alert-danger'>Bir hata oluştu.</div>");
                    }
                },
                error: function () {
                    $("#resultMessage").html("<div class='alert alert-danger'>Sunucu hatası.</div>");
                }
            });
        });
    </script>
}